<!DOCTYPE html>
<html>

<head>
    The blocks are processed as follows:\
    * If a block is an integer, the score for that throw is the value of that integer\
    * If a block is an "X", the score for that throw is double the value of the last integer\
    * If a block is a "+", the score for that throw is the sum of the prior two throws\
    * If a block is a "Z", the previous throw is thrown away (as if it never happened)

    <script>
        var arrayBlock = [1, 3, "X", 4, 5, "+", 1, "Z"]; // 28
        var arrayBlock1 = [1, 3, "+", 4, 5, "Z", 1, "X"]; // 15

        var arrayBlock2 = [1, "X", 5, "+", 3, "Z", 1] // 16
        var arrayBlock3 = [1, "X", 5, "+", 3, "Z", 1, "+"] // 24


        function totalScore(array) {
            var score = 0;
            array.forEach((value, index) => {
                if (!(isNaN(value))) {
                    score += value;
                } else if (value == "X") {
                    var doublePreviousIndex = index - 1
                    score += (array[doublePreviousIndex] * 2);
                } else if (value == "+") {
                    var sumIndex1 = index - 1;
                    var sumIndex2 = index - 2;
                    score += array[sumIndex1] + array[sumIndex2];
                } else if (value == "Z") {
                    var removePreviousIndex = index - 1;
                    score = score - array[removePreviousIndex]
                }
            })
            return score;
        }

        function totalScoreImproved(array) {
            var score = 0;
            var eachThrow = [];
            var lastNumberIndex;
            array.forEach((value, index) => {
                if (!(isNaN(value))) {
                    lastNumberIndex = index;
                    score += value;
                    eachThrow.push(value);
                } else if (value == "X") {
                    var throwDouble = array[lastNumberIndex] * 2
                    score += throwDouble;
                    eachThrow.push(throwDouble);
                } else if (value == "+") {
                    var index1 = eachThrow.length - 1;
                    var index2 = eachThrow.length - 2;
                    var throwSum = eachThrow[index1] + eachThrow[index2];
                    score += throwSum;
                    eachThrow.push(throwSum);
                } else if (value == "Z") {
                    var previousRemoveIndex = eachThrow.length - 1;
                    score = score - eachThrow[previousRemoveIndex];
                    eachThrow.pop();
                }
            })
            return score;
        }

        console.log(totalScore(arrayBlock))
        console.log(totalScore(arrayBlock1))
        console.log(totalScoreImproved(arrayBlock2))
        console.log(totalScoreImproved(arrayBlock3))


    </script>
</head>

</html>