<!DOCTYPE html>
<html>

<head>
    The blocks are processed as follows:\
    * If a block is an integer, the score for that throw is the value of that integer\
    * If a block is an "X", the score for that throw is double the value of the last integer\
    * If a block is a "+", the score for that throw is the sum of the prior two throws\
    * If a block is a "Z", the previous throw is thrown away (as if it never happened)

    <script>
        var arrayBlock = [1, 3, "X", 4, 5, "+", 1, "Z"]; // 28
        var arrayBlock1 = [1, 3, "+", 4, 5, "Z", 1, "X"]; // 15

        var arrayBlock2 = [1, "X", 5, "+", 3, "Z", 1] // 16
        var arrayBlock3 = [1, "X", 5, "+", 3, "Z", 1, "+"] // 24
        var arrayBlock4 = [1, "X", 5, "+", 3, "Z", 1] // 16



        function totalScore(array) {
            var score = 0;
            array.forEach((value, index) => {
                if (!(isNaN(value))) {
                    score += value;
                } else if (value == "X") {
                    var doublePreviousIndex = index - 1
                    score += (array[doublePreviousIndex] * 2);
                } else if (value == "+") {
                    var sumIndex1 = index - 1;
                    var sumIndex2 = index - 2;
                    score += array[sumIndex1] + array[sumIndex2];
                } else if (value == "Z") {
                    var removePreviousIndex = index - 1;
                    score = score - array[removePreviousIndex]
                }
            })
            return score;
        }

        function totalScoreImproved(array) {
            var score = 0;
            var eachThrow = [];
            var lastNumber;
            array.forEach((value, index) => {
                var a = 0;
                if (!(isNaN(value))) {
                    lastNumber = value;
                    Throw = value
                } else if (value == "X") {
                    if (eachThrow.length > 0) {
                        Throw = lastNumber * 2
                    }
                } else if (value == "+") {
                    if (eachThrow.length > 1) {
                        Throw = eachThrow[eachThrow.length - 1] + eachThrow[eachThrow.length - 2];
                    } else if (eachThrow.length > 0) {
                        Throw = eachThrow[eachThrow.length - 1];
                    }
                } else if (value == "Z") {
                    Throw = -eachThrow.pop();
                }
                
                score += Throw;
                if (value !== "Z") {
                    eachThrow.push(Throw);
                }

            })

            return score;
        }


        function totalScoreImproved2(array) {
            var score = 0;
            var eachThrow = [];
            var lastNumber;
            array.forEach((value, index) => {
                if (!(isNaN(value))) {
                    lastNumber = value;
                    eachThrow.push(value);
                } else if (value == "X") {
                    if (eachThrow.length > 0) {
                        var throwDouble = array[lastNumberIndex] * 2
                        score += throwDouble;
                        eachThrow.push(throwDouble);
                    }
                } else if (value == "+") {
                    if (eachThrow.length > 1) {
                        var throwSum = eachThrow[eachThrow.length - 1] + eachThrow[eachThrow.length - 2];
                        score += throwSum;
                        eachThrow.push(throwSum);
                    } else if (eachThrow.length > 0) {
                        var throwSum = eachThrow[eachThrow.length - 1];
                        score += throwSum;
                        eachThrow.push(throwSum);
                    }
                } else if (value == "Z") {
                    score = score - eachThrow[eachThrow.length - 1];
                    eachThrow.pop();
                }
            })

            return score;
        }
        console.log(totalScore(arrayBlock))
        console.log(totalScore(arrayBlock1))
        console.log(totalScoreImproved(arrayBlock2))
        console.log(totalScoreImproved(arrayBlock3))


    </script>
</head>

</html>